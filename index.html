
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Football Match Live Reporter</title>
    <!-- Dépendances chargées depuis un CDN -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.11.11/dist/html-to-image.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Empêche le flash de contenu non stylé pendant le chargement de React */
        body {
            opacity: 0;
            transition: opacity 0.3s ease-in;
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "vite": "https://aistudiocdn.com/vite@^7.1.12",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.0",
    "html-to-image": "https://aistudiocdn.com/html-to-image@^1.11.13"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-presets="react">
        const { useState, useReducer, useEffect, useRef } = React;

        // --- TYPES ---
        const EventType = {
          Goal: 'GOAL',
          YellowCard: 'YELLOW_CARD',
          RedCard: 'RED_CARD',
          MatchEnd: 'MATCH_END',
        };

        // --- ICONS ---
        const FootballIcon = ({ className }) => (
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}>
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 16.93c-1.65-.22-3.08-1-4.26-2.18l1.41-1.41c.88.88 2.01 1.45 3.26 1.59v2zm-5.21-3.67C4.8 14.16 4.25 12.89 4.07 11.5H6.1c.17 1.03.62 1.98 1.29 2.71l-1.41 1.42zM12 4c1.25 0 2.38.57 3.26 1.45l1.41-1.41C15.08 3 13.65 2.22 12 2.07V4zm4.94 3.55c.67.73 1.12 1.68 1.29 2.71H20c-.18-1.39-.73-2.66-1.72-3.75l-1.42 1.42zM13 4.07V6.1c1.25.14 2.38.71 3.26 1.59l1.41-1.41C16.08 5 14.65 4.22 13 4.07zM8.74 8.04C7.86 8.92 7.29 10.05 7.15 11.3H4.07c.22-1.65 1-3.08 2.18-4.26l1.41 1.42L8.74 8.04zM17.26 15.96c.88-.88 1.45-2.01 1.59-3.26h2.07c-.22 1.65-1 3.08-2.18 4.26l-1.41-1.42zM12 20c-1.25 0-2.38-.57-3.26-1.45L7.33 19.97C8.92 21.01 10.35 21.78 12 21.93V20z" />
          </svg>
        );

        const YellowCardIcon = ({ className }) => (
          <div className={`w-3 h-4 bg-yellow-400 border border-black rounded-sm ${className}`} />
        );

        const RedCardIcon = ({ className }) => (
          <div className={`w-3 h-4 bg-red-600 border border-black rounded-sm ${className}`} />
        );

        const WhistleIcon = ({ className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={1.5} stroke="currentColor" className={className}>
                <path strokeLinecap="round" strokeLinejoin="round" d="M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5M15 15l5.25 5.25" />
            </svg>
        );

        // --- HOOK ---
        const useMatchData = () => {
          const initialState = {
            homeTeam: { name: '', logo: null },
            awayTeam: { name: '', logo: null },
            score: { home: 0, away: 0 },
            events: [],
            isFinished: false,
          };

          const matchReducer = (state, action) => {
            switch (action.type) {
              case 'SETUP_TEAMS':
                return { ...state, homeTeam: action.payload.homeTeam, awayTeam: action.payload.awayTeam };
              case 'ADD_EVENT': {
                const newScore = { ...state.score };
                if (action.payload.type === EventType.Goal) {
                  if (action.payload.teamSide === 'home') newScore.home++;
                  else newScore.away++;
                }
                const newEvent = {
                  ...action.payload,
                  id: new Date().toISOString(),
                  currentScore: newScore,
                };
                return { ...state, score: newScore, events: [...state.events, newEvent].sort((a, b) => parseInt(a.minute) - parseInt(b.minute)) };
              }
              case 'FINISH_MATCH': {
                  if (state.isFinished) return state;
                  const endEvent = {
                      id: new Date().toISOString(),
                      minute: 'FT',
                      type: EventType.MatchEnd,
                      teamSide: 'home',
                      player: 'Final Whistle',
                      currentScore: state.score,
                  };
                  return { ...state, isFinished: true, events: [...state.events, endEvent] };
              }
              case 'RESET_MATCH':
                localStorage.removeItem('football-match-data');
                return initialState;
              case 'LOAD_STATE':
                return action.payload;
              default:
                return state;
            }
          };

          const [state, dispatch] = useReducer(matchReducer, initialState, (initial) => {
              try {
                  const savedState = localStorage.getItem('football-match-data');
                  return savedState ? JSON.parse(savedState) : initial;
              } catch (error) {
                  console.error("Failed to load state from localStorage", error);
                  return initial;
              }
          });

          useEffect(() => {
            try {
              localStorage.setItem('football-match-data', JSON.stringify(state));
            } catch (error) {
              console.error("Failed to save state to localStorage", error);
            }
          }, [state]);

          return { state, dispatch };
        };

        // --- COMPONENTS ---
        const TeamSetup = ({ onSetupComplete }) => {
          const [homeName, setHomeName] = useState('');
          const [awayName, setAwayName] = useState('');
          const [homeLogo, setHomeLogo] = useState(null);
          const [awayLogo, setAwayLogo] = useState(null);

          const homeLogoInputRef = useRef(null);
          const awayLogoInputRef = useRef(null);

          const fileToBase64 = (file) => {
            return new Promise((resolve, reject) => {
              const reader = new FileReader();
              reader.readAsDataURL(file);
              reader.onload = () => resolve(reader.result);
              reader.onerror = (error) => reject(error);
            });
          };

          const handleLogoChange = async (e, setLogo) => {
            if (e.target.files && e.target.files[0]) {
              const base64 = await fileToBase64(e.target.files[0]);
              setLogo(base64);
            }
          };

          const handleSubmit = (e) => {
            e.preventDefault();
            if (homeName.trim() && awayName.trim()) {
              onSetupComplete(
                { name: homeName.trim(), logo: homeLogo },
                { name: awayName.trim(), logo: awayLogo }
              );
            }
          };

          return (
            <div className="min-h-screen flex items-center justify-center p-4 bg-gray-900 bg-opacity-80">
              <div className="w-full max-w-md mx-auto bg-gray-800 rounded-xl shadow-lg p-8 text-white">
                <h2 className="text-3xl font-bold text-center mb-8">Match Setup</h2>
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div className="flex flex-col items-center">
                    <h3 className="text-xl font-semibold mb-4">Home Team</h3>
                    <div
                      onClick={() => homeLogoInputRef.current?.click()}
                      className="w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center cursor-pointer mb-2 overflow-hidden border-2 border-dashed border-gray-500 hover:border-green-400 transition-colors"
                    >
                      {homeLogo ? <img src={homeLogo} alt="Home Logo" className="w-full h-full object-cover" /> : <span className="text-gray-400 text-xs text-center">Upload Logo</span>}
                      <input type="file" accept="image/*" ref={homeLogoInputRef} onChange={(e) => handleLogoChange(e, setHomeLogo)} className="hidden" />
                    </div>
                    <input
                      type="text"
                      placeholder="Home Team Name"
                      value={homeName}
                      onChange={(e) => setHomeName(e.target.value)}
                      className="w-full bg-gray-700 text-white rounded-md p-2 text-center focus:outline-none focus:ring-2 focus:ring-green-500"
                      required
                    />
                  </div>
                  <div className="text-center font-bold text-2xl my-4">VS</div>
                  <div className="flex flex-col items-center">
                    <h3 className="text-xl font-semibold mb-4">Away Team</h3>
                     <div
                      onClick={() => awayLogoInputRef.current?.click()}
                      className="w-24 h-24 bg-gray-700 rounded-full flex items-center justify-center cursor-pointer mb-2 overflow-hidden border-2 border-dashed border-gray-500 hover:border-blue-400 transition-colors"
                    >
                      {awayLogo ? <img src={awayLogo} alt="Away Logo" className="w-full h-full object-cover" /> : <span className="text-gray-400 text-xs text-center">Upload Logo</span>}
                      <input type="file" accept="image/*" ref={awayLogoInputRef} onChange={(e) => handleLogoChange(e, setAwayLogo)} className="hidden" />
                    </div>
                    <input
                      type="text"
                      placeholder="Away Team Name"
                      value={awayName}
                      onChange={(e) => setAwayName(e.target.value)}
                      className="w-full bg-gray-700 text-white rounded-md p-2 text-center focus:outline-none focus:ring-2 focus:ring-blue-500"
                      required
                    />
                  </div>
                  <button type="submit" className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition-transform transform hover:scale-105 mt-8">
                    Start Match
                  </button>
                </form>
              </div>
            </div>
          );
        };

        const Scoreboard = ({ state }) => {
          const { homeTeam, awayTeam, score } = state;
          return (
            <div className="bg-black bg-opacity-50 backdrop-blur-sm rounded-xl shadow-lg p-4 text-white w-full max-w-2xl mx-auto">
              <div className="flex justify-between items-center">
                <div className="flex-1 flex flex-col items-center text-center">
                  <img src={homeTeam.logo || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNkZGQiLz48L3N2Zz4='} alt={`${homeTeam.name} logo`} className="w-16 h-16 md:w-20 md:h-20 rounded-full object-cover border-2 border-gray-400 mb-2" />
                  <h2 className="text-sm md:text-xl font-bold">{homeTeam.name}</h2>
                </div>
                <div className="flex items-center space-x-4 text-3xl md:text-5xl font-mono">
                  <span>{score.home}</span>
                  <span className="text-gray-400">-</span>
                  <span>{score.away}</span>
                </div>
                <div className="flex-1 flex flex-col items-center text-center">
                  <img src={awayTeam.logo || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iNTAiIGN5PSI1MCIgcj0iNTAiIGZpbGw9IiNhYWEiLz48L3N2Zz4='} alt={`${awayTeam.name} logo`} className="w-16 h-16 md:w-20 md:h-20 rounded-full object-cover border-2 border-gray-400 mb-2" />
                  <h2 className="text-sm md:text-xl font-bold">{awayTeam.name}</h2>
                </div>
              </div>
            </div>
          );
        };

        const Timeline = ({ events }) => {
            const EventIcon = ({ type }) => {
              switch (type) {
                case EventType.Goal:
                  return <FootballIcon className="w-5 h-5 text-white" />;
                case EventType.YellowCard:
                  return <YellowCardIcon className="w-3 h-4" />;
                case EventType.RedCard:
                  return <RedCardIcon className="w-3 h-4" />;
                case EventType.MatchEnd:
                    return <WhistleIcon className="w-5 h-5 text-gray-300" />;
                default:
                  return null;
              }
            };

            const TimelineItem = ({ event }) => {
              const isHome = event.teamSide === 'home';
              const itemAlignment = isHome ? 'flex-row' : 'flex-row-reverse';
              const textAlign = isHome ? 'text-right' : 'text-left';
              const scoreText = event.type === EventType.Goal ? `(${event.currentScore.home} - ${event.currentScore.away})` : '';

              if (event.type === EventType.MatchEnd) {
                return (
                    <div className="flex justify-center items-center my-4">
                        <div className="w-1/3 h-px bg-gray-600"></div>
                        <div className="flex items-center gap-2 mx-2 text-gray-300">
                            <EventIcon type={event.type} />
                            <span className="font-bold">{event.player}</span>
                        </div>
                        <div className="w-1/3 h-px bg-gray-600"></div>
                    </div>
                )
              }

              return (
                <div className={`flex justify-between items-center w-full my-3 ${itemAlignment}`}>
                  <div className={`w-5/12 ${textAlign}`}>
                    <p className="font-bold text-sm md:text-base">{event.player}</p>
                    {scoreText && <p className="text-xs text-gray-300">{scoreText}</p>}
                  </div>
                  <div className="relative w-2/12 flex justify-center">
                    <div className="absolute top-1/2 -translate-y-1/2 w-px h-16 bg-gray-600 -z-10"></div>
                    <div className="bg-gray-700 w-10 h-10 rounded-full flex items-center justify-center border-2 border-gray-600">
                      <div className="flex flex-col items-center">
                         <span className="text-xs font-mono">{event.minute}'</span>
                         <EventIcon type={event.type} />
                      </div>
                    </div>
                  </div>
                  <div className="w-5/12"></div>
                </div>
              );
            };

          if (events.length === 0) {
            return (
                <div className="text-center py-10 text-gray-400">
                    <p>The match is about to begin...</p>
                    <p>Add the first event using the controls below.</p>
                </div>
            )
          }
          return (
            <div className="text-white w-full max-w-2xl mx-auto mt-4 px-2">
              {events.map((event) => (
                <TimelineItem key={event.id} event={event} />
              ))}
            </div>
          );
        };

        const EventModal = ({ isOpen, onClose, onSubmit, eventType, teamSide }) => {
          const [player, setPlayer] = useState('');
          const [minute, setMinute] = useState('');

          if (!isOpen) return null;

          const handleSubmit = (e) => {
            e.preventDefault();
            if (player.trim() && minute.trim()) {
              onSubmit(player, minute);
              setPlayer('');
              setMinute('');
              onClose();
            }
          };
          
          const eventTitle = {
            [EventType.Goal]: 'Goal',
            [EventType.YellowCard]: 'Yellow Card',
            [EventType.RedCard]: 'Red Card',
          }[eventType];

          const teamBorderColor = teamSide === 'home' ? 'border-green-500' : 'border-blue-500';
          const teamButtonColor = teamSide === 'home' ? 'bg-green-600 hover:bg-green-700' : 'bg-blue-600 hover:bg-blue-700';

          return (
            <div className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
              <div className={`bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm border-t-4 ${teamBorderColor}`}>
                <h2 className="text-2xl font-bold text-white mb-4">Add {eventTitle}</h2>
                <form onSubmit={handleSubmit} className="space-y-4">
                  <div>
                    <label htmlFor="player" className="block text-sm font-medium text-gray-300">Player Name</label>
                    <input
                      type="text"
                      id="player"
                      value={player}
                      onChange={(e) => setPlayer(e.target.value)}
                      className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      required
                    />
                  </div>
                  <div>
                    <label htmlFor="minute" className="block text-sm font-medium text-gray-300">Minute</label>
                    <input
                      type="number"
                      id="minute"
                      value={minute}
                      onChange={(e) => setMinute(e.target.value)}
                      className="mt-1 block w-full bg-gray-700 border border-gray-600 rounded-md shadow-sm py-2 px-3 text-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      required
                    />
                  </div>
                  <div className="flex justify-end space-x-3 pt-4">
                    <button type="button" onClick={onClose} className="px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-500 transition">Cancel</button>
                    <button type="submit" className={`px-4 py-2 text-white rounded-md transition ${teamButtonColor}`}>Add Event</button>
                  </div>
                </form>
              </div>
            </div>
          );
        };

        const Controls = ({ onAddEvent, onFinishMatch, onReset, onExport, isFinished }) => {
            const ActionButton = ({ onClick, children, className }) => (
              <button onClick={onClick} className={`flex items-center justify-center space-x-2 p-2 rounded-lg transition-transform transform hover:scale-110 ${className}`}>
                {children}
              </button>
            );

          const handleReset = () => {
            if (window.confirm("Are you sure you want to reset? All current match data will be lost.")) {
              onReset();
            }
          };

          return (
            <div className="fixed bottom-0 left-0 right-0 bg-gray-900 bg-opacity-80 backdrop-blur-sm p-2 shadow-2xl z-40">
              <div className="flex justify-between items-center max-w-2xl mx-auto">
                {/* Home Controls */}
                <div className="flex items-center space-x-2">
                  {!isFinished && (
                    <>
                      <ActionButton onClick={() => onAddEvent(EventType.Goal, 'home')} className="bg-green-600 text-white"><FootballIcon className="w-5 h-5"/></ActionButton>
                      <ActionButton onClick={() => onAddEvent(EventType.YellowCard, 'home')} className="bg-yellow-400"><YellowCardIcon className="border-none"/></ActionButton>
                      <ActionButton onClick={() => onAddEvent(EventType.RedCard, 'home')} className="bg-red-600"><RedCardIcon className="border-none"/></ActionButton>
                    </>
                  )}
                </div>

                {/* Center Controls */}
                <div className="flex flex-col items-center space-y-1">
                  {!isFinished && (
                    <button onClick={onFinishMatch} className="px-3 py-1 text-xs bg-gray-500 text-white rounded-full hover:bg-gray-400 transition">End Match</button>
                  )}
                  <button onClick={onExport} className="px-3 py-1 text-xs bg-blue-600 text-white rounded-full hover:bg-blue-500 transition">Export</button>
                  <button onClick={handleReset} className="px-3 py-1 text-xs bg-red-800 text-white rounded-full hover:bg-red-700 transition">Reset</button>
                </div>

                {/* Away Controls */}
                <div className="flex items-center space-x-2">
                  {!isFinished && (
                    <>
                      <ActionButton onClick={() => onAddEvent(EventType.Goal, 'away')} className="bg-blue-600 text-white"><FootballIcon className="w-5 h-5"/></ActionButton>
                      <ActionButton onClick={() => onAddEvent(EventType.YellowCard, 'away')} className="bg-yellow-400"><YellowCardIcon className="border-none"/></ActionButton>
                      <ActionButton onClick={() => onAddEvent(EventType.RedCard, 'away')} className="bg-red-600"><RedCardIcon className="border-none"/></ActionButton>
                    </>
                  )}
                </div>
              </div>
            </div>
          );
        };
        
        // --- APP ---
        function App() {
          const { state, dispatch } = useMatchData();
          const [isModalOpen, setIsModalOpen] = useState(false);
          const [modalData, setModalData] = useState(null);
          const [exportedImage, setExportedImage] = useState(null);

          const exportRef = useRef(null);

          const handleSetupComplete = (homeTeam, awayTeam) => {
            dispatch({ type: 'SETUP_TEAMS', payload: { homeTeam, awayTeam } });
          };

          const handleAddEventClick = (type, teamSide) => {
            setModalData({ type, teamSide });
            setIsModalOpen(true);
          };

          const handleModalSubmit = (player, minute) => {
            if (modalData) {
              dispatch({
                type: 'ADD_EVENT',
                payload: { type: modalData.type, teamSide: modalData.teamSide, player, minute },
              });
            }
            setIsModalOpen(false);
            setModalData(null);
          };
          
          const handleExport = () => {
            const node = exportRef.current;
            if (node) {
              const originalStyle = node.style.cssText;
              const originalClassName = node.className;

              const soccerFieldBg = "url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 1200'%3e%3crect width='800' height='1200' fill='%233a9f4a'/%3e%3crect x='20' y='20' width='760' height='1160' fill='none' stroke='rgba(255,255,255,0.8)' stroke-width='4'/%3e%3cline x1='20' y1='600' x2='780' y2='600' stroke='rgba(255,255,255,0.8)' stroke-width='4'/%3e%3ccircle cx='400' cy='600' r='100' fill='none' stroke='rgba(255,255,255,0.8)' stroke-width='4'/%3e%3c/svg%3e\")";
              
              node.className = originalClassName.replace('bg-gray-900/50', '');
              node.style.backgroundImage = soccerFieldBg;
              node.style.backgroundSize = 'cover';
              node.style.backgroundPosition = 'center';

              window.htmlToImage.toPng(node)
                .then((dataUrl) => {
                  setExportedImage(dataUrl);
                })
                .catch((error) => {
                  console.error('oops, something went wrong!', error);
                })
                .finally(() => {
                  node.style.cssText = originalStyle;
                  node.className = originalClassName;
                });
            }
          };

          if (!state.homeTeam.name || !state.awayTeam.name) {
            return <TeamSetup onSetupComplete={handleSetupComplete} />;
          }

          return (
            <div className="bg-green-800 min-h-screen font-sans" style={{ backgroundImage: `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2322c55e' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}}>
                <div className="container mx-auto p-4 pb-24">
                    <div ref={exportRef} className="bg-gray-900/50 rounded-lg p-2 md:p-4">
                        <Scoreboard state={state} />
                        <Timeline events={state.events} />
                    </div>
                </div>
                <Controls
                    onAddEvent={handleAddEventClick}
                    onFinishMatch={() => dispatch({ type: 'FINISH_MATCH' })}
                    onReset={() => dispatch({ type: 'RESET_MATCH' })}
                    onExport={handleExport}
                    isFinished={state.isFinished}
                />
                {modalData && (
                    <EventModal
                        isOpen={isModalOpen}
                        onClose={() => setIsModalOpen(false)}
                        onSubmit={handleModalSubmit}
                        eventType={modalData.type}
                        teamSide={modalData.teamSide}
                    />
                )}
                {exportedImage && (
                    <div className="fixed inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-50 p-4">
                         <div className="bg-gray-800 p-4 rounded-lg shadow-xl w-full max-w-lg">
                            <h3 className="text-white text-xl font-bold mb-4 text-center">Export Visual</h3>
                            <p className="text-gray-300 text-sm text-center mb-4">Long-press or right-click the image to save or share.</p>
                            <img src={exportedImage} alt="Match timeline export" className="w-full h-auto rounded-md border-2 border-gray-600" />
                            <button onClick={() => setExportedImage(null)} className="mt-4 w-full bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition">
                                Close
                            </button>
                         </div>
                    </div>
                )}
            </div>
          );
        }

        // --- RENDER ---
        const rootElement = document.getElementById('root');
        if (rootElement) {
            const root = ReactDOM.createRoot(rootElement);
            root.render(
                <React.StrictMode>
                    <App />
                </React.StrictMode>
            );
            // Montre le body une fois que React a été rendu pour éviter le flash de contenu
            document.body.style.opacity = 1;
        } else {
            console.error("Root element not found");
        }
    </script>
</body>
</html>
